if (self.CavalryLogger) { CavalryLogger.start_js(["Iy6Y+"]); }

__d("CreditCardFormParam",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ACCOUNT_ID:"account_id",ACCOUNT_COUNTRY_CODE:"account_country_code",APP_ID:"app_id",CARD_EXPIRATION:"exp",CARD_FBID:"cc_fbid",CARD_ID:"cc_id",CARD_TYPE:"cardType",CITY:"city",CONTEXT_ID:"context_id",COUNTRY:"country",CSC_LENGTH:"csc_length",EMAIL:"email",FIRST_NAME:"firstName",TRACKING_ID:"tracking_id",JSFAIL_SOURCE:"jsfail_source",KEYPRESS_TIMES:"kpts",LAST_NAME:"lastName",MONTH:"month",STATE:"state",STREET:"street",STREET_2:"street2",VALIDATE_ADDRESS:"validate_address",VALIDATE_NAME:"validate_name",VALIDATE_ZIP:"validate_zip",YEAR:"year",ZIP:"zip",CARD_HOLDER_NAME:"card_holder_name",VALIDATOR_CHECKS:"checks",CARD_NUMBER:"creditCardNumber",CSC:"csc",CARD_NUMBER_FIRST_6:"creditCardNumber_first6",CARD_NUMBER_LAST_4:"creditCardNumber_last4",CARD_NUMBER_TOKEN:"creditCardNumber_token",CSC_TOKEN:"csc_token",AUTH_LEVEL_FLAG:"auth_level",AUTH_AMOUNT:"auth_amount",AUTH_CURRENCY:"auth_currency",AUTO_EXPAND_AUTH_LEVEL_FLAG:"auto_expand_auth_level",PAYMENT_ITEM_TYPE:"payment_item_type",COMBINED_PAYMENT_TYPE:"combined_payment_type",RECEIVER_ID:"receiver_id",CREDENTIAL_ID:"credential_id",IS_STORED_BALANCE:"is_stored_balance",IS_CHECKOUT_ELIGIBLE:"is_checkout_eligible",CHECKOUT_SAVE_CC_WITH_AUTH:"checkout_save_cc_with_auth",CHECKOUT_FUND_AMOUNT:"checkout_fund_amount",FLOW_PLACEMENT:"flow_placement",FLOW_TYPE:"flow_type",STORED_BALANCE_STATUS:"stored_balance_status",SESSION_ID:"session_id",IS_FROM_SUPPORT:"is_from_support",SOURCE_SUPPORT_FORM_ID:"source_support_form_id",GEO_COUNTRY:"geo_country"})}),null);
__d("P2PAPIUtils",["fbt","CreditCardFormParam","guid"],(function(a,b,c,d,e,f,g){__p&&__p();var h=[1001,1004,1006,1002],i={getRandomDigits:function(a){return Math.random().toString().slice(2,2+a)},genRequestID:function(){return"id:"+b("guid")()+":"+Date.now()},genOfflineThreadingID:function(){return Date.now()+""+i.getRandomDigits(6)},getUncaughtErrorMessage:function(a){return a&&h.indexOf(a)!==-1?g._("Sorry, we were unable to complete your request. Please check that you are connected to the internet or refresh this page and try again."):g._("Sorry, something went wrong. Please try again later.")},prepareCardMutationData:function(a){__p&&__p();var c={},d=a[b("CreditCardFormParam").CARD_NUMBER].replace(/ /g,"");c[b("CreditCardFormParam").CARD_NUMBER]=d;if(typeof a[b("CreditCardFormParam").CARD_EXPIRATION]==="string"){d=a[b("CreditCardFormParam").CARD_EXPIRATION].split("/");c[b("CreditCardFormParam").MONTH]=d[0];c[b("CreditCardFormParam").YEAR]=d[1];c[b("CreditCardFormParam").CARD_EXPIRATION]={};c[b("CreditCardFormParam").CARD_EXPIRATION][b("CreditCardFormParam").MONTH]=c[b("CreditCardFormParam").MONTH];c[b("CreditCardFormParam").CARD_EXPIRATION][b("CreditCardFormParam").YEAR]=c[b("CreditCardFormParam").YEAR]}else c[b("CreditCardFormParam").MONTH]=a[b("CreditCardFormParam").CARD_EXPIRATION][b("CreditCardFormParam").MONTH],c[b("CreditCardFormParam").YEAR]=a[b("CreditCardFormParam").CARD_EXPIRATION][b("CreditCardFormParam").YEAR];return babelHelpers["extends"]({},a,c)}};e.exports=i}),null);
__d("P2PPasswordProtectionParam",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({STATUS:"status"})}),null);
__d("P2PPaymentCampaignNames",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ZANGOOSE:"zangoose",SEVIPER:"seviper",PICHU:"pichu",PIKACHU:"pikachu",TEPIG:"tepig",REFERRAL:"referral"})}),null);
__d("P2PTransferParam",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TRANSFER_ID:"transfer_id",STATUS:"status",SENDER_STATUS:"sender_status",RECEIVER_STATUS:"receiver_status",RISK_RESULT:"risk_result"})}),null);
__d("PaymentActionAPIFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AUTHORIZE:"authorize",CAPTURE:"capture",CHARGE:"charge",REFUND:"refund",VOID:"void",CHARGEBACK:"chargeback",CHARGEBACK_REVERSAL:"chargeback_reversal",SALE:"sale",GEN_ASYNC_CREDENTIAL:"gen_async_credential",INIT:"init"})}),null);
__d("PaymentTokenProxyUtils",["CurrentEnvironment","URI"],(function(a,b,c,d,e,f){__p&&__p();a={getURI:function(a,c){__p&&__p();c===void 0&&(c=null);a=new(b("URI"))("/ajax/payment/token_proxy.php").setDomain(window.location.hostname).setProtocol("https").addQueryData(a);var d=a.getDomain().split(".");d.indexOf("secure")<0&&(d.splice(1,0,"secure"),c==="www"||c==="secure"?d[0]!=="secure"&&d.shift():c!==null?d[0]==="secure"?d.splice(0,0,c):d[0]=c:d[0]=="www"&&d.shift(),a.setDomain(d.join(".")));if(b("CurrentEnvironment").messengerdotcom){c=a.getDomain();c=c.replace("messenger.com","facebook.com");a.setDomain(c)}return a}};e.exports=a}),null);
__d("XCommerceConsumerReceiptUploadCompletionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/commerce/transaction-invoice/update/receipt-upload/",{})}),null);
__d("XCommerceTransactionInvoiceDetailsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/commerce/transaction_invoice_details/",{invoice_id:{type:"String",required:!0}})}),null);
__d("XMoneypennyPaymentsCreateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/moneypenny/payments/_create/",{})}),null);
__d("XP2PAddressCreateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/address/_create/",{})}),null);
__d("XP2PAddressesController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/addresses/",{})}),null);
__d("XP2PBannerDismissalsUpdateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/banner_dismissals/_update/",{banner_type:{type:"String",required:!0}})}),null);
__d("XP2PBannerStatesController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/banner_states/",{})}),null);
__d("XP2PBannerViewsUpdateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/banner_views/_update/",{banner_type:{type:"String",required:!0}})}),null);
__d("XP2PCardBINValidateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/card_bin/validate/",{bin_number:{type:"String",required:!0}})}),null);
__d("XP2PCreditCardCreateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/credit_cards/_create/",{})}),null);
__d("XP2PCreditCardDeleteController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/credit_cards/_delete/",{})}),null);
__d("XP2PCreditCardUpdateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/credit_cards/_update/",{})}),null);
__d("XP2PCreditCardVerifyController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/credit_cards/_verify/",{})}),null);
__d("XP2PCreditCardsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/credit_cards/",{})}),null);
__d("XP2PCurrentUserProfileDataController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/current_user_profile_data/",{})}),null);
__d("XP2PExtensiveTransferDetailsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/transaction/details/",{id:{type:"String",required:!0}})}),null);
__d("XP2PFriendPickerController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/friend_picker/",{limit:{type:"Int",defaultValue:100},query:{type:"String"}})}),null);
__d("XP2PPasswordProtectionStatusController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/password_protection_status/",{})}),null);
__d("XP2PPasswordProtectionStatusUpdateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/password_protection_status/_update/",{})}),null);
__d("XP2PPaymentRequestCancelController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/payment_requets/_cancel/",{})}),null);
__d("XP2PPaymentRequestCreateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/payment_requests/_create/",{})}),null);
__d("XP2PPaymentRequestDeclineController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/payment_requets/_decline/",{})}),null);
__d("XP2PPendingPaymentRequestsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/pending_payment_requests/",{})}),null);
__d("XP2PPlatformContextController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/platform_context/",{platform_context_id:{type:"String",required:!0}})}),null);
__d("XP2PPlatformMsgrCommerceCartCreateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/platform/msgr_commerce/create/",{})}),null);
__d("XP2PPlatformSetShippingAddressController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/platform/set_shipping_address/",{})}),null);
__d("XP2PPresetCreditCardSetController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/preset_credit_card/_set/",{})}),null);
__d("XP2PProductItemBannerController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/product_item_banner/",{other_user_id:{type:"String",required:!0}})}),null);
__d("XP2PProductItemBannerDismissalController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/product_item_banner/_dismiss/",{platform_context_id:{type:"String",required:!0}})}),null);
__d("XP2PProductItemBannerMarkSoldController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/product_item_banner/_mark_sold/",{platform_context_id:{type:"String",required:!0}})}),null);
__d("XP2PTransactionsCampaignCreateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/transactions/campaign/_create/",{})}),null);
__d("XP2PTransactionsCancelController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/transactions/_cancel/",{})}),null);
__d("XP2PTransactionsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/transactions/",{since:{type:"Int"}})}),null);
__d("XP2PTransactionsCreateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/transactions/_create/",{})}),null);
__d("XP2PTransactionsDeclineController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/transactions/_decline/",{})}),null);
__d("XP2PUserEligibilityController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/p2p/user_eligibility/",{user_ids:{type:"StringVector",required:!0}})}),null);
__d("XPayPagesCommercePaymentsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pay/pages_commerce_payments/_charge/",{})}),null);
__d("P2PAPI",["AsyncRequest","CreditCardFormParam","ImmutableObject","P2PActions","P2PAPIUtils","P2PGKValues","P2PLogger","P2PPasswordProtectionParam","P2PPaymentCampaignNames","P2PPaymentLoggerEvent","P2PPaymentRequestStatus","P2PTransferParam","PaymentActionAPIFields","PaymentTokenProxyUtils","XCommerceConsumerReceiptUploadCompletionController","XCommerceTransactionInvoiceDetailsController","XMoneypennyPaymentsCreateController","XP2PAddressCreateController","XP2PAddressesController","XP2PBannerDismissalsUpdateController","XP2PBannerStatesController","XP2PBannerViewsUpdateController","XP2PCardBINValidateController","XP2PCreditCardCreateController","XP2PCreditCardDeleteController","XP2PCreditCardsController","XP2PCreditCardUpdateController","XP2PCreditCardVerifyController","XP2PCurrentUserProfileDataController","XP2PExtensiveTransferDetailsController","XP2PFriendPickerController","XP2PPasswordProtectionStatusController","XP2PPasswordProtectionStatusUpdateController","XP2PPaymentRequestCancelController","XP2PPaymentRequestCreateController","XP2PPaymentRequestDeclineController","XP2PPendingPaymentRequestsController","XP2PPlatformContextController","XP2PPlatformMsgrCommerceCartCreateController","XP2PPlatformSetShippingAddressController","XP2PPresetCreditCardSetController","XP2PProductItemBannerController","XP2PProductItemBannerDismissalController","XP2PProductItemBannerMarkSoldController","XP2PTransactionsCampaignCreateController","XP2PTransactionsCancelController","XP2PTransactionsController","XP2PTransactionsCreateController","XP2PTransactionsDeclineController","XP2PUserEligibilityController","XPayPagesCommercePaymentsController","emptyFunction","isEmpty"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a,event){b("P2PGKValues").P2PWWWClientExceptionLogging&&b("P2PLogger").log(event,{exception_message:a.getErrorDescription(),exception_code:a.getError()})};a={getAllCreditCards:function(){var a=b("XP2PCreditCardsController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(a).setMethod("GET").setReadOnly(!0).setAllowCrossPageTransition(!0).setHandler(function(a){a=a.getPayload();a=a.error?[]:a;b("P2PActions").updateCreditCards(a)}).setErrorHandler(function(a){b("P2PActions").updateCreditCardsError()}).send()},createTransaction:function(a){__p&&__p();var c=b("XP2PTransactionsCreateController").getURIBuilder().getURI(),d={},e=a.formData,f=a.success||b("emptyFunction"),h=a.error||b("emptyFunction");d[b("CreditCardFormParam").CREDENTIAL_ID]=e[b("CreditCardFormParam").CREDENTIAL_ID];d.amount=e.amount;d.receiver_id=e.receiverId;d.offline_threading_id=b("P2PAPIUtils").genOfflineThreadingID();d.group_thread_fbid=e.group_thread_fbid;d.platform_context_id=e.platform_context_id;d.shipping_address_id=e.shippingAddressID;d.shipping_option_id=e.shippingOptionID;d.memo_text=e.memoText;d.memo_image_ids=e.memoPhotoIDs;d.payment_request_id=e.paymentRequestID;new(b("AsyncRequest"))().setData(d).setMethod("POST").setURI(c).setAllowCrossPageTransition(!0).setHandler(function(a){a=a?a.getPayload():{};a.error?h(a.error):(f(a),this.getAllCreditCards(),d.payment_request_id&&b("P2PActions").paymentRequestUpdated({id:d.payment_request_id,currentStatus:b("P2PPaymentRequestStatus").TRANSFER_COMPLETED}))}.bind(this)).setErrorHandler(function(a){h({message:b("P2PAPIUtils").getUncaughtErrorMessage(a.getError())}),g(a,b("P2PPaymentLoggerEvent").UI_ACTN_CREATE_TRANSFER_EXCEPTION)}).send()},addCreditCard:function(a){__p&&__p();b("P2PActions").ignoreCreditCardChannelEvents();var c=b("XP2PCreditCardCreateController").getURIBuilder();c=c.getURI().getPath();var d=a.onSuccess||b("emptyFunction"),e=a.onError||b("emptyFunction");c=b("PaymentTokenProxyUtils").getURI({tpe:c});a=b("P2PAPIUtils").prepareCardMutationData(a);var f=new(b("ImmutableObject"))(a),h=a.hasPlatformContext;delete a.onSuccess;delete a.onError;b("P2PActions").creditCardSaving();new(b("AsyncRequest"))().setAllowCrossOrigin(!0).setURI(c).setData(a).setMethod("POST").setHandler(function(a){a=a.getPayload();!a.errors?(f=b("ImmutableObject").set(f,a),b("P2PActions").addCreditCard(f),a.isPreset&&b("P2PActions").transferAccepted(),h&&b("P2PActions").checkoutCreditCardSelected(a[b("CreditCardFormParam").CREDENTIAL_ID]),d()):(b("P2PActions").addCreditCardError(babelHelpers["extends"]({requestID:f.requestID},a)),e(a));b("P2PActions").allowCreditCardChannelEvents()}).setErrorHandler(function(a){b("P2PActions").addCreditCardError({requestID:f.requestID,errors:{general:{message:b("P2PAPIUtils").getUncaughtErrorMessage(a.getError())}}}),b("P2PActions").allowCreditCardChannelEvents(),g(a,b("P2PPaymentLoggerEvent").UI_ACTN_ADD_CARD_EXCEPTION)}).send()},getTransactions:function(a){a=a||{};var c={};a=a;var d=b("XP2PTransactionsController").getURIBuilder().getURI(),e=new(b("ImmutableObject"))(a);a.since&&(c.since=a.since);return new(b("AsyncRequest"))().setData(c).setURI(d).setMethod("GET").setReadOnly(!0).setHandler(function(a){a=a.getPayload();!a.error?b("P2PActions").updateTransfers(a):b("P2PActions").updateTransfersError(babelHelpers["extends"]({requestID:e.requestID},a))}).setErrorHandler(function(a){b("P2PActions").updateTransfersError({error:{message:b("P2PAPIUtils").getUncaughtErrorMessage(a.getError())},requestID:e.requestID})}).send()},getExtensiveTransferDetailsByID:function(a){a=b("XP2PExtensiveTransferDetailsController").getURIBuilder().setString("id",a).getURI();new(b("AsyncRequest"))().setURI(a).setMethod("GET").setReadOnly(!0).setHandler(function(a){a=a.getPayload();a.error||b("P2PActions").extensiveTransferDetailsLoaded(a)}).send()},getNUXTransactions:function(){var a=new Date();a=Math.round(a.setDate(a.getDate()-15)/1e3);var c=b("XP2PTransactionsController").getURIBuilder().getURI();return new(b("AsyncRequest"))().setData({since:a}).setURI(c).setMethod("GET").setReadOnly(!0).setHandler(function(a){a=a.getPayload();a.error||b("P2PActions").updateNUXTransfers(a)}).send()},updatePresetCreditCard:function(a){var c=b("XP2PPresetCreditCardSetController").getURIBuilder().getURI();new(b("AsyncRequest"))().setData(a).setURI(c).setMethod("POST").setHandler(function(c){c=c.getPayload();!c.error?(b("P2PActions").updatePresetCreditCard(babelHelpers["extends"]({},c,{requestID:a.requestID})),b("P2PActions").transferAccepted()):b("P2PActions").updatePresetCreditCardError(babelHelpers["extends"]({},c,{requestID:a.requestID}))}).setErrorHandler(function(c){b("P2PActions").updatePresetCreditCardError({error:{message:b("P2PAPIUtils").getUncaughtErrorMessage(c.getError())},requestID:a.requestID}),g(c,b("P2PPaymentLoggerEvent").UI_ACTN_UPDATE_PRESET_CARD_EXCEPTION)}).send()},updateCreditCard:function(a){__p&&__p();b("P2PActions").ignoreCreditCardChannelEvents();var c=b("XP2PCreditCardUpdateController").getURIBuilder();c=c.getURI().getPath();c=b("PaymentTokenProxyUtils").getURI({tpe:c});a=b("P2PAPIUtils").prepareCardMutationData(a);var d=new(b("ImmutableObject"))(a);new(b("AsyncRequest"))().setAllowCrossOrigin(!0).setURI(c).setData(a).setMethod("POST").setHandler(function(a){a=a.getPayload();!a.errors?b("P2PActions").updateCreditCard(d):b("P2PActions").updateCreditCardError(babelHelpers["extends"]({},a,{requestID:d.requestID}));b("P2PActions").allowCreditCardChannelEvents()}).setErrorHandler(function(a){b("P2PActions").updateCreditCardError({errors:{general:{message:b("P2PAPIUtils").getUncaughtErrorMessage(a.getError())}},requestID:d.requestID}),b("P2PActions").allowCreditCardChannelEvents(),g(a,b("P2PPaymentLoggerEvent").UI_ACTN_UPDATE_CARD_EXCEPTION)}).send()},deleteCreditCard:function(a){var c=b("XP2PCreditCardDeleteController").getURIBuilder().getURI();new(b("AsyncRequest"))().setData(a).setMethod("POST").setURI(c).setHandler(function(c){c=c.getPayload();!c.error?b("P2PActions").deleteCreditCard(babelHelpers["extends"]({},c,{requestID:a.requestID})):b("P2PActions").deleteCreditCardError(babelHelpers["extends"]({},c,{requestID:a.requestID}))}).setErrorHandler(function(c){b("P2PActions").deleteCreditCardError({error:{message:b("P2PAPIUtils").getUncaughtErrorMessage(c.getError())},requestID:a.requestID})}).send()},getPasswordProtectionSetting:function(a){var c=b("XP2PPasswordProtectionStatusController").getURIBuilder().getURI(),d=a.success||b("emptyFunction"),e=a.error||b("emptyFunction");new(b("AsyncRequest"))().setURI(c).setMethod("GET").setReadOnly(!0).setHandler(function(a){a=a?a.getPayload():[];a.error?e():d(a)}).setErrorHandler(function(a){e()}).send()},setPasswordProtectionSetting:function(a){var c=b("XP2PPasswordProtectionStatusUpdateController").getURIBuilder().getURI(),d=a.formData,e=a.success||b("emptyFunction"),f=a.error||b("emptyFunction");a={};a[b("P2PPasswordProtectionParam").STATUS]=d[b("P2PPasswordProtectionParam").STATUS];new(b("AsyncRequest"))().setData(a).setURI(c).setMethod("POST").setHandler(function(a){a=a?a.getPayload():{};a.error?f(a.error):e()}).setErrorHandler(function(a){f()}).send()},declineTransaction:function(a){var c=b("XP2PTransactionsDeclineController").getURIBuilder().getURI(),d=a.formData,e=a.success||b("emptyFunction"),f=a.error||b("emptyFunction"),h={};h[b("P2PTransferParam").TRANSFER_ID]=d[b("P2PTransferParam").TRANSFER_ID];new(b("AsyncRequest"))().setData(h).setURI(c).setMethod("POST").setHandler(function(a){a=a?a.getPayload():{};var c={};a.error?f(a.error):(e(),c[b("P2PTransferParam").TRANSFER_ID]=h[b("P2PTransferParam").TRANSFER_ID],b("P2PActions").transferDeclined(c))}).setErrorHandler(function(a){f(),g(a,b("P2PPaymentLoggerEvent").UI_ACTN_DECLINE_TRANSFER_EXCEPTION)}).send()},cancelTransaction:function(a){var c=b("XP2PTransactionsCancelController").getURIBuilder().getURI(),d=a.formData,e=a.success||b("emptyFunction"),f=a.error||b("emptyFunction");a={};a[b("P2PTransferParam").TRANSFER_ID]=d[b("P2PTransferParam").TRANSFER_ID];new(b("AsyncRequest"))().setData(a).setURI(c).setMethod("POST").setHandler(function(a){a=a?a.getPayload():{};a.error?f(a.error):e()}).setErrorHandler(function(a){f()}).send()},verifyCreditCard:function(a){var c=b("XP2PCreditCardVerifyController").getURIBuilder();c=c.getURI().getPath();c=b("PaymentTokenProxyUtils").getURI({tpe:c});new(b("AsyncRequest"))().setAllowCrossOrigin(!0).setURI(c).setData(a).setMethod("POST").setHandler(function(c){c=c.getPayload();!c.error?b("P2PActions").verifyCreditCard(babelHelpers["extends"]({},c,{requestID:a.requestID})):b("P2PActions").verifyCreditCardError(babelHelpers["extends"]({},c,{requestID:a.requestID}))}).setErrorHandler(function(c){b("P2PActions").verifyCreditCardError({error:{message:b("P2PAPIUtils").getUncaughtErrorMessage(c.getError())},requestID:a.requestID}),g(c,b("P2PPaymentLoggerEvent").UI_ACTN_VERIFY_CARD_EXCEPTION)}).send()},validateBINNumber:function(a){a=a||{};var c=new(b("ImmutableObject"))(a),d=b("XP2PCardBINValidateController").getURIBuilder().setString("bin_number",a.binNumber).getURI();return new(b("AsyncRequest"))().setURI(d).setMethod("GET").setReadOnly(!0).setHandler(function(d){d=d.getPayload();!d.error?b("P2PActions").binNumberValidated(babelHelpers["extends"]({},d,{requestID:a.requestID})):b("P2PActions").binNumberValidatedError(babelHelpers["extends"]({},d,{requestID:c.requestID}))}).send()},getUserEligibility:function(a){a=a||{};a=b("XP2PUserEligibilityController").getURIBuilder().setStringVector("user_ids",a.userIDs).getURI();return new(b("AsyncRequest"))().setURI(a).setMethod("GET").setReadOnly(!0).setAllowCrossPageTransition(!0).setHandler(function(a){a=a.getPayload();a.error||b("P2PActions").userEligibilityUpdated(a)}).send()},getFriendsList:function(a,c){a=b("XP2PFriendPickerController").getURIBuilder().setInt("limit",a).setString("query",c).getURI();return new(b("AsyncRequest"))().setURI(a).setMethod("GET").setReadOnly(!0).setHandler(function(a){a=a.getPayload();a.error||b("P2PActions").friendsListUpdated({friends:a,query:c})}).send()},getBannerStates:function(){var a=b("XP2PBannerStatesController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(a).setMethod("GET").setReadOnly(!0).setHandler(function(a){a=a.getPayload();a.error||b("P2PActions").bannerStatesUpdated(a)}).send()},incrementBannerViews:function(a){a=b("XP2PBannerViewsUpdateController").getURIBuilder().setString("banner_type",a).getURI();new(b("AsyncRequest"))().setMethod("POST").setURI(a).send()},incrementBannerDismissals:function(a){b("P2PActions").bannerDismissed(a);a=b("XP2PBannerDismissalsUpdateController").getURIBuilder().setString("banner_type",a).getURI();new(b("AsyncRequest"))().setMethod("POST").setURI(a).send()},createMoneypennyTransfer:function(a){var c=b("XMoneypennyPaymentsCreateController").getURIBuilder().getURI();new(b("AsyncRequest"))().setMethod("POST").setURI(c).setData({item_id:a.item_id,credential_id:a.credential_id,amount:a.amount,external_request_id:a.external_request_id}).setHandler(function(c){c=c.getPayload();!c.error?(b("P2PActions").moneypennyTransferCreated(babelHelpers["extends"]({},c,{requestID:a.requestID})),this.getAllCreditCards()):b("P2PActions").moneypennyTransferCreatedError(babelHelpers["extends"]({},c,{requestID:a.requestID}))}.bind(this)).setErrorHandler(function(c){b("P2PActions").moneypennyTransferCreatedError({error:{message:b("P2PAPIUtils").getUncaughtErrorMessage(c.getError())},requestID:a.requestID}),g(c,b("P2PPaymentLoggerEvent").UI_ACTN_CREATE_M_TRANSFER_EXCEPTION)}).send()},createFinancialIncentivesTransfer:function(a){var c=b("XP2PTransactionsCampaignCreateController").getURIBuilder().getURI(),d=a.success||b("emptyFunction"),e=a.error||b("emptyFunction"),f={};f[b("CreditCardFormParam").CREDENTIAL_ID]=a.credential_id;f.external_request_id=b("P2PAPIUtils").genOfflineThreadingID();f.campaign_name=b("P2PPaymentCampaignNames").SEVIPER;new(b("AsyncRequest"))().setData(f).setURI(c).setMethod("POST").setHandler(function(a){a=a.getPayload();a.error?e(a.error):d()}).send()},getPlatformContextByOtherUserID:function(a){a=a||{};a=b("XP2PProductItemBannerController").getURIBuilder().setString("other_user_id",a.otherUserID).getURI();return new(b("AsyncRequest"))().setURI(a).setMethod("GET").setReadOnly(!0).setAllowCrossPageTransition(!0).setHandler(function(a){a=a.getPayload();!a.error&&!b("isEmpty")(a)&&b("P2PActions").addPlatformContext(a)}).send()},getPlatformContextByID:function(a){a=a||{};var c=a.onSuccess||b("emptyFunction"),d=a.onError||b("emptyFunction"),e=b("XP2PPlatformContextController").getURIBuilder().setString("platform_context_id",a.id).getURI();return new(b("AsyncRequest"))().setURI(e).setMethod("GET").setReadOnly(!0).setAllowCrossPageTransition(!0).setHandler(function(a){a=a.getPayload();!a.error&&!b("isEmpty")(a)&&(b("P2PActions").addPlatformContext(a),c(a))}).setErrorHandler(function(c){b("P2PActions").addPlatformContextError({itemID:a.productItemID,error:{message:b("P2PAPIUtils").getUncaughtErrorMessage(c.getError())}}),d()}).send()},dismissPlatformContextBanner:function(a){b("P2PActions").platformContextBannerDismissed(a);a=b("XP2PProductItemBannerDismissalController").getURIBuilder().setString("platform_context_id",a).getURI();new(b("AsyncRequest"))().setMethod("POST").setURI(a).send()},markSoldPlatformContextProductItem:function(a){b("P2PActions").platformContextProductItemSold(a);a=b("XP2PProductItemBannerMarkSoldController").getURIBuilder().setString("platform_context_id",a).getURI();new(b("AsyncRequest"))().setMethod("POST").setURI(a).send()},getAddresses:function(){var a=b("XP2PAddressesController").getURIBuilder().getURI();return new(b("AsyncRequest"))().setURI(a).setMethod("GET").setReadOnly(!0).setAllowCrossPageTransition(!0).setHandler(function(a){a=a.getPayload();a.error||b("P2PActions").updateAddresses(a)}).send()},addAddress:function(a){a===void 0&&(a={});var c=b("XP2PAddressCreateController").getURIBuilder().getURI(),d,e=a.platformContext,f=a.onSuccess||b("emptyFunction"),h=a.onError||b("emptyFunction");d={label:a.label,care_of:a.care_of,city:a.city,street1:a.street1,street2:a.street2,state:a.state,zip:a.zip,country:a.country};b("P2PActions").addressSaving();return new(b("AsyncRequest"))().setData(d).setURI(c).setMethod("POST").setHandler(function(c){c=c.getPayload();!c.errors?(b("P2PActions").addAddress(babelHelpers["extends"]({},c,d,{requestID:a.requestID})),e&&(b("P2PActions").checkoutAddressSelected(c.id),this.setPlatformContextShippingAddress({platformContextID:e.id,shippingAddressID:c.id})),f()):(b("P2PActions").addAddressError(babelHelpers["extends"]({},c,{requestID:a.requestID})),h(c))}.bind(this)).setErrorHandler(function(c){b("P2PActions").addAddressError({errors:{general:{message:b("P2PAPIUtils").getUncaughtErrorMessage(c.getError())}},requestID:a.requestID}),g(c,b("P2PPaymentLoggerEvent").UI_ACTN_ADD_ADDRESS_EXCEPTION)}).send()},createMCCart:function(a){var c=b("XP2PPlatformMsgrCommerceCartCreateController").getURIBuilder().getURI(),d,e=a.productItemID;a=a||{};d={item_id:e};b("P2PActions").checkoutCartInitiated();return new(b("AsyncRequest"))().setData(d).setURI(c).setMethod("POST").setHandler(function(c){c=c.getPayload();!c.error?(b("P2PActions").addPlatformContext(babelHelpers["extends"]({},c)),b("P2PActions").checkoutCartCreated({sellerID:a.sellerID,productItemID:e})):b("P2PActions").addPlatformContextError(babelHelpers["extends"]({itemID:e},c))}).setErrorHandler(function(a){b("P2PActions").addPlatformContextError({itemID:e,error:{message:b("P2PAPIUtils").getUncaughtErrorMessage(a.getError())}}),g(a,b("P2PPaymentLoggerEvent").UI_ACTN_CREATE_CART_EXCEPTION)}).send()},setPlatformContextShippingAddress:function(a){var c=b("XP2PPlatformSetShippingAddressController").getURIBuilder().getURI(),d=a.platformContextID,e=a.shippingAddressID;a=a||{};a={platform_context_id:d,shipping_address_id:e};b("P2PActions").checkoutProcessing(!0);return new(b("AsyncRequest"))().setData(a).setURI(c).setMethod("POST").setHandler(function(a){b("P2PActions").checkoutProcessing(!1);a=a.getPayload();a.error||b("P2PActions").addPlatformContext(babelHelpers["extends"]({},a))}).setErrorHandler(function(a){g(a,b("P2PPaymentLoggerEvent").UI_ACTN_SET_CART_ADDRESS_EXCEPTION)}).send()},getCurrentUserProfileData:function(){var a=b("XP2PCurrentUserProfileDataController").getURIBuilder().getURI();return new(b("AsyncRequest"))().setURI(a).setMethod("GET").setReadOnly(!0).setAllowCrossPageTransition(!0).setHandler(function(a){a=a.getPayload();!a.error?b("P2PActions").checkoutBuyerProfileUpdated(a):b("P2PActions").checkoutBuyerProfileUpdated({})}).setErrorHandler(function(a){b("P2PActions").checkoutBuyerProfileUpdated({})}).send()},createPaymentRequest:function(a){__p&&__p();var c=b("XP2PPaymentRequestCreateController").getURIBuilder().getURI(),d=a.formData,e=d.amount,f=d.memoText,h=d.group_thread_fbid;h={amount:e,memo_text:f,offline_threading_id:b("P2PAPIUtils").genOfflineThreadingID(),group_thread_fbid:h,platform_context_id:d.platform_context_id};d=d.requestees;var i=d.get(0)||{};d.size>1?h.requestee_ids=d.map(function(a){return a.userID}).toJS():h.requestee_id=i.userID;b("P2PActions").paymentRequestInitiated();new(b("AsyncRequest"))().setData(h).setURI(c).setMethod("POST").setHandler(function(c){c=c.getPayload();!c.error?(b("P2PActions").paymentRequestCreated(babelHelpers["extends"]({requesteeID:i.userID,amount:e,memoText:f},c)),a.success(c)):(b("P2PActions").paymentRequestCreatedError(c),a.error(c));b("P2PActions").paymentRequestInitiatedComplete()}).setErrorHandler(function(c){a.error({error:{message:b("P2PAPIUtils").getUncaughtErrorMessage(c.getError())}}),b("P2PActions").paymentRequestInitiatedComplete(),g(c,b("P2PPaymentLoggerEvent").UI_ACTN_CREATE_REQUEST_EXCEPTION)}).send()},declinePaymentRequest:function(a){var c=b("XP2PPaymentRequestDeclineController").getURIBuilder().getURI(),d=a.paymentRequestID,e=a.success||b("emptyFunction"),f=a.error||b("emptyFunction");a={payment_request_id:d};b("P2PActions").paymentRequestDeclineInitiated();return new(b("AsyncRequest"))().setData(a).setURI(c).setMethod("POST").setHandler(function(a){a=a.getPayload();!a.error?(b("P2PActions").paymentRequestDeclined(d),b("P2PActions").hideDialog(),e(a)):(b("P2PActions").paymentRequestDeclineError(a),f(a))}).setErrorHandler(function(a){b("P2PActions").paymentRequestDeclineError({error:{message:b("P2PAPIUtils").getUncaughtErrorMessage(a.getError())}}),f(),g(a,b("P2PPaymentLoggerEvent").UI_ACTN_DECLINE_REQUEST_EXCEPTION)}).send()},cancelPaymentRequest:function(a){var c=b("XP2PPaymentRequestCancelController").getURIBuilder().getURI(),d=a.paymentRequestID,e=a.success||b("emptyFunction"),f=a.error||b("emptyFunction");a={payment_request_id:d};b("P2PActions").paymentRequestCancelInitiated();return new(b("AsyncRequest"))().setData(a).setURI(c).setMethod("POST").setHandler(function(a){a=a.getPayload();!a.error?(b("P2PActions").paymentRequestCanceled(d),b("P2PActions").hideDialog(),e(a)):(b("P2PActions").paymentRequestCancelError(a),f(a))}).setErrorHandler(function(a){b("P2PActions").paymentRequestCancelError({error:{message:b("P2PAPIUtils").getUncaughtErrorMessage(a.getError())}}),f(),g(a,b("P2PPaymentLoggerEvent").UI_ACTN_CANCEL_REQUEST_EXCEPTION)}).send()},getPendingPaymentRequests:function(){var a=b("XP2PPendingPaymentRequestsController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(a).setMethod("GET").setReadOnly(!0).setAllowCrossPageTransition(!0).setHandler(function(a){a=a.getPayload();a=a.error?[]:a;b("P2PActions").paymentRequestsFetched(a)}).send()},getCommerceInvoiceDetails:function(a){var c=b("XCommerceTransactionInvoiceDetailsController").getURIBuilder().setString("invoice_id",a.invoiceID).getURI(),d=a.onSuccess||b("emptyFunction"),e=a.onError||b("emptyFunction");new(b("AsyncRequest"))().setURI(c).setMethod("GET").setReadOnly(!0).setHandler(function(a){a=a.getPayload();!a.error?d(a):e(a)}).setErrorHandler(function(a){e({error:{message:b("P2PAPIUtils").getUncaughtErrorMessage(a.getError())}})}).send()},completeReceiptUploadCheckout:function(a){var c=b("XCommerceConsumerReceiptUploadCompletionController").getURIBuilder().getURI(),d=a.onSuccess||b("emptyFunction"),e=a.onError||b("emptyFunction");a={invoice_id:a.invoiceID,receipt_image_id:a.receiptImageID,selected_payment_option_id:a.selectedPaymentOptionID};new(b("AsyncRequest"))().setURI(c).setMethod("POST").setData(a).setAllowCrossOrigin(!0).setHandler(function(a){a=a.getPayload();!a||!a.error?d(a):e({message:b("P2PAPIUtils").getUncaughtErrorMessage()})}).setErrorHandler(function(a){e({message:b("P2PAPIUtils").getUncaughtErrorMessage(a.getError())})}).send()},completeNMORCheckout:function(a){__p&&__p();var c=a.success,d=a.error;a={nmor_order_type:a.nmorOrderType,action:b("PaymentActionAPIFields").SALE,receiver_id:a.receiverID,order_id:a.orderID,request_id:b("P2PAPIUtils").genRequestID(),currency:a.currency,credential_id:a.credentialId,shipping_address_id:a.shippingAddressID,shipping_option_id:a.shippingOptionID,payment_method:{type:a.paymentMethodType},payment_method_data:a.paymentMethodData,extra_data:a.extraData,amount:a.amount,csc:a.securityCode};var e=b("XPayPagesCommercePaymentsController").getURIBuilder().getURI();if(a.credential_id&&a.csc){var f=e.getPath();e=b("PaymentTokenProxyUtils").getURI({tpe:f})}f=new(b("AsyncRequest"))().setAllowCrossOrigin(!0).setURI(e).setData(a).setMethod("POST");c&&f.setHandler(function(a){a=a.getPayload();a.error?d(a.error):c(a.id,a.extra_data)});d&&f.setErrorHandler(function(a){d({message:b("P2PAPIUtils").getUncaughtErrorMessage(a.getError())})});f.send()}};e.exports=a}),null);
__d("P2PUserEligibilityStore",["EventEmitter","MercuryIDs","P2PActionConstants","P2PAPI","P2PDispatcher","P2PGKValues"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(){g.constructor.call(this),h={},b("P2PDispatcher").register(this.onEventDispatched.bind(this))}a.prototype.onEventDispatched=function(a){var c=a.data;a=a.type;switch(a){case b("P2PActionConstants").USER_ELIGIBILITY_UDPATED:this.handleEligibilityUpdated(c);this.emit("change");break}};a.prototype.getEligibilityByUserIDs=function(a){var c=[],d,e,f={};for(var g=0;g<a.length;g++)e=a[g],d=h[e],d===void 0&&(h[e]=null,c.push(e)),f[e]=h[e];b("P2PGKValues").P2PEnabled&&c.length&&b("P2PAPI").getUserEligibility({userIDs:c});return f};a.prototype.getEligibilityByUserID=function(a){var b=this.getEligibilityByUserIDs([a]);return b[a]};a.prototype.getEligibilityByThreadID=function(a){return this.getEligibilityByUserID(b("MercuryIDs").getUserIDFromThreadID(a))};a.prototype.handleEligibilityUpdated=function(a){for(var b=0;b<a.length;b++)h[a[b].user_id]=a[b].p2p_eligible};e.exports=new a()}),null);
__d("DOMP2PTrigger",["cx","JSXDOM","MessengerEnvironment","P2PAmountUtils","P2PTriggersUtils","TransformTextToDOMMixin"],(function(a,b,c,d,e,f,g){__p&&__p();a={MAX_ITEMS:40,match:function(a){a=b("P2PTriggersUtils").getMatches(a);if(!a||!a.length)return!1;var c=a[0];if(!b("P2PAmountUtils").isValidSendAmount(c))return!1;a=a.index;return{startIndex:a,endIndex:a+c.length,element:this._element(c)}},_element:function(a){return b("JSXDOM").a({href:"#",className:"_35i0"+(b("MessengerEnvironment").messengerui?"":" _4g4e"),"data-p2p-trigger":a},a)}};e.exports=Object.assign(a,b("TransformTextToDOMMixin"))}),null);
__d("p2pTriggerJSXDOMToString",["DOMEmoji","DOMEmote","DOMP2PTrigger","JSXDOM","transformTextToDOM"],(function(a,b,c,d,e,f){a=function(a,c,d,e,f,g){var h=[];e&&h.push(b("DOMP2PTrigger"));c&&(f?h.push(b("DOMEmoji").params({isSupportedEmoji:f})):h.push(b("DOMEmoji")));d&&(g?h.push(b("DOMEmote").params({getMessengerEmote:g})):h.push(b("DOMEmote")));return b("JSXDOM").span(null,b("transformTextToDOM")(a,h)).innerHTML};e.exports=a}),null);
__d("P2PTriggers.react",["DOM","Event","MercuryIDs","P2PActions","P2PLogger","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","P2PUserEligibilityStore","React","ReactDOM","StoreAndPropBasedStateMixin","nullthrows","p2pTriggerJSXDOMToString"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"P2PTriggers",mixins:[b("StoreAndPropBasedStateMixin")(b("P2PUserEligibilityStore"))],propTypes:{getMessengerEmote:a.func,isSupportedEmoji:a.func,renderEmoji:a.bool,renderEmoticons:a.bool,text:a.string.isRequired,threadID:a.string.isRequired},getInitialState:function(){return{amount:""}},statics:{calculateState:function(a){var c=b("MercuryIDs").isGroupChat(a.threadID)||b("P2PUserEligibilityStore").getEligibilityByThreadID(a.threadID);return{isThreadEligible:c,otherUserID:b("MercuryIDs").getUserIDFromThreadID(a.threadID)}}},_clickListeners:null,componentDidMount:function(){this._clickListeners=[],this.bindClickListeners()},componentWillUnmount:function(){this.unbindClickListeners()},log:function(a,c){b("P2PLogger").log(a,babelHelpers["extends"]({www_event_flow:b("P2PPaymentLoggerEventFlow").UI_FLOW_P2P_SEND,object_id:this.state.otherUserID},c))},bindClickListeners:function(){var a=b("nullthrows")(this._clickListeners);if(!a.length){var c=b("DOM").scry(b("ReactDOM").findDOMNode(this),"[data-p2p-trigger]");for(var d=0,e=c.length;d<e;d++)a.push(b("Event").listen(c[d],"click",this.handleTriggerClick))}},unbindClickListeners:function(){var a;if(this._clickListeners){for(var b=0,c=this._clickListeners.length;b<c;b++)a=this._clickListeners[b],a&&a.remove();this._clickListeners=[]}},componentDidUpdate:function(a,b){!b.isThreadEligible&&this.state.isThreadEligible&&this.bindClickListeners()},getAmountFromTriggerClickEvent:function(a){a=a.target.getAttribute("data-p2p-trigger")||"";return a.replace(/[^0-9\.]+/g,"")},handleTriggerClick:function(a){a.preventDefault();a=this.getAmountFromTriggerClickEvent(a);this.setState({amount:a});this.openSendView();this.log(b("P2PPaymentLoggerEvent").UI_ACTN_INITIATE_SEND_TRIGGER,{raw_amount:this.state.amount,currency:"USD"})},openSendView:function(){b("P2PActions").chatSendViewOpened({threadID:this.props.threadID,amount:this.state.amount})},render:function(){var a=b("p2pTriggerJSXDOMToString")(this.props.text,this.props.renderEmoji,this.props.renderEmoticons,this.state.isThreadEligible,this.props.isSupportedEmoji,this.props.getMessengerEmote);return b("React").createElement("span",{dangerouslySetInnerHTML:{__html:a}})}});e.exports=c}),null);
__d("TextWithEntitiesAndP2P.react",["BaseTextWithEntities.react","Link.react","P2PTriggers.react","React"],(function(a,b,c,d,e,f){"use strict";a=b("React").createClass({displayName:"TextWithEntitiesAndP2P",_renderText:function(a){return b("React").createElement(b("P2PTriggers.react"),{getMessengerEmote:this.props.getMessengerEmote,isSupportedEmoji:this.props.isSupportedEmoji,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji,text:a,threadID:this.props.threadID})},_renderRange:function(a,c){if(this.props.interpolator)return this.props.interpolator(a,c);else return b("React").createElement(b("Link.react"),{href:c.entity},a)},render:function(){return b("React").createElement(b("BaseTextWithEntities.react"),babelHelpers["extends"]({},this.props,{textRenderer:this._renderText,rangeRenderer:this._renderRange,ranges:this.props.ranges,imageRanges:this.props.imageRanges,aggregatedRanges:this.props.aggregatedRanges,text:this.props.text}))}});e.exports=a}),null);